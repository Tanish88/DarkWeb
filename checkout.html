<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - SecureShop</title>
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="Complete your secure purchase with anonymous payment">
</head>
<body>
    <!-- Privacy Notice -->
    <div class="privacy-notice">
        ‚ö†Ô∏è This site does not track users or store personal data. Use Tor Browser with JavaScript disabled for maximum privacy.
    </div>

    <!-- Navigation Header -->
    <header class="navbar">
        <nav>
            <div class="nav-brand">
                <h1>SecureShop</h1>
            </div>
            <ul class="nav-links">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="products.html" class="nav-link">Products</a></li>
                <li><a href="cart.html" class="nav-link">Cart (<span id="cart-count">0</span>)</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <section class="checkout-section">
            <h2>Secure Checkout</h2>
            
            <!-- Order Summary -->
            <div class="checkout-summary">
                <h3>Order Summary</h3>
                <div id="checkout-items">
                    <!-- Items will be loaded dynamically -->
                </div>
                <div class="checkout-total">
                    <div class="total-row">
                        <span>Total: <span id="checkout-total-usd">$0.00 USD</span></span>
                    </div>
                    <div class="total-row">
                        <span>XMR: <span id="checkout-total-xmr">0.00 XMR</span></span>
                    </div>
                </div>
            </div>

            <!-- Checkout Form -->
            <div class="checkout-form-container">
                <h3>Delivery Information</h3>
                <p class="form-notice">All products are delivered digitally. Provide a secure contact method for delivery.</p>
                
                <form id="checkout-form" class="checkout-form">
                    <div class="form-group">
                        <label for="contact-method">Contact Method *</label>
                        <select id="contact-method" name="contactMethod" required>
                            <option value="">Select delivery method</option>
                            <option value="email">Secure Email Address</option>
                            <option value="xmr-address">Monero Address (for encrypted message)</option>
                            <option value="pgp-key">PGP Public Key</option>
                            <option value="tor-address">Tor Hidden Service Address</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="contact-info">Contact Information *</label>
                        <textarea id="contact-info" name="contactInfo" rows="3" 
                                placeholder="Enter your secure contact information based on selected method"
                                required></textarea>
                        <small class="form-help">This information is used only for product delivery and is not stored.</small>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="terms-checkbox" name="terms-checkbox" required>
                            I understand this is a demonstration site and no real products will be delivered *
                        </label>
                    </div>

                    <button type="submit" class="submit-btn">Complete Order</button>
                </form>
            </div>

            <!-- Payment Information -->
            <div class="payment-info">
                <h3>Payment Instructions</h3>
                <div class="payment-method">
                    <h4>Monero Payment Address</h4>
                    <div class="monero-address">
                        <code id="monero-address">4A1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef12</code>
                        <button class="copy-btn" onclick="copyToClipboard('monero-address')">Copy</button>
                    </div>
                    <p class="payment-notice">
                        Send the exact XMR amount shown above to complete your purchase. 
                        Products will be delivered after 3 network confirmations.
                    </p>
                </div>
            </div>

            <!-- Order Confirmation (hidden initially) -->
            <div id="order-confirmation" class="order-confirmation" style="display: none;">
                <h3>‚úÖ Order Confirmed</h3>
                <p>Your order has been submitted successfully. You will receive your digital products at the specified contact method after payment confirmation.</p>
                <div class="confirmation-details">
                    <p><strong>Order ID:</strong> <span id="order-id"></span></p>
                    <p><strong>Total:</strong> <span id="confirmed-total"></span></p>
                </div>
                
                <!-- Real-world Implementation Explanation -->
                <div class="implementation-info">
                    <h4>üîí How Privacy-Focused E-commerce Works</h4>
                    <p><strong>This is a demonstration.</strong> In a real privacy-focused marketplace, here's how order processing would work:</p>
                    <ul>
                        <li><strong>Order Notification:</strong> The website owner receives encrypted order details via secure server</li>
                        <li><strong>Payment Monitoring:</strong> Server monitors the Monero blockchain for payments to the provided address</li>
                        <li><strong>Automatic Fulfillment:</strong> After payment confirmation, products are automatically delivered to customer's contact method</li>
                        <li><strong>Privacy Protection:</strong> Customer contact info is encrypted and deleted after delivery</li>
                        <li><strong>No Personal Data:</strong> Only order ID, payment amount, and timestamp are stored permanently</li>
                    </ul>
                    <p><em>Check your browser console to see the simulated order notification that would be sent to the website owner.</em></p>
                    
                    <!-- Email Configuration for Website Owner -->
                    <div class="owner-config">
                        <h5>üìß Website Owner Email Configuration</h5>
                        <p>To receive real email notifications about orders, configure your settings:</p>
                        <div class="config-steps">
                            <p><strong>1. Email Address:</strong> Edit <code>config.js</code> and change <code>OWNER_EMAIL</code> to your email</p>
                            <p><strong>2. SendGrid API:</strong> Get a free SendGrid API key and add it to your environment</p>
                            <p><strong>3. Current Config:</strong> <span id="current-owner-email">owner@secureshop.example</span></p>
                        </div>
                    </div>
                </div>
                
                <button onclick="window.location.href='index.html'" class="cta-button">Return to Home</button>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 SecureShop. Built for privacy and anonymity.</p>
            <p>No personal data collected. No tracking scripts. No cookies.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="config.js"></script>
    <script src="emailService.js"></script>
    <script src="script.js"></script>
</body>
</html>
